---
layout: false
---

- file_regex = /\.html/
- depth = 0
- if defined? directory
	- file_regex = Regexp.new("#{directory.gsub("/","\\/")}\\/[^.]+.html")
	- depth = directory.count("/") + 1
- else
	- directory = nil

!!! 5
%html
	%head
		%meta{ :charset => "utf-8" }/
		%title Slides
		= stylesheet_link_tag "global.css", :media => "all", :rel => "stylesheet"
	
	%body
		#content
			%h1 
				Slides
				- if !directory.nil?
					= "/#{directory}"
			:markdown

			
				This is [Andrew Pilsch](http://atp1.us)'s slide repository. It hosts slides made using both [Remark.js](http://remarkjs.com) and [Reveal.js](http://lab.hakim.se/reveal-js/).
		
			%ul
				- sitemap.resources.select{|a| (a.destination_path =~ file_regex)}.each do |resource|
					- if resource.data["title"] and resource.destination_path.count("/") <= depth
						%li
							= link_to "#{resource.data["title"]}", resource.destination_path.gsub("#{directory}/","")
							%small
								(#{resource.data["layout"] ? resource.data["layout"].capitalize : "Remark"})
					- if resource.destination_path =~ /.+\/index.html/ and resource.destination_path != "#{directory}/index.html"
						%li
							=link_to resource.destination_path.gsub('index.html',""), resource.destination_path
				